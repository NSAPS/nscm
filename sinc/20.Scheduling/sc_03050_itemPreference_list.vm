## 비정상적 접근 방지 
#loginCheck()
## 화면 resizing 을 위한 size 변수 
#set( $resizeFuncCallCode = "setHtmlGridAutoResize2('122', '167')" )      
  
## 공장, 원가부문, 라인을 저장하기 위한 변수
<input type="hidden" name="stored_plant" value="$!{selected_plant}"> 
<input type="hidden" name="stored_item" value="$!{item_id}">

<script type='text/javascript' src='${project}/dwr/interface/commonUtil.js'></script>
<script type='text/javascript' src='${project}/dwr/engine.js'></script>
<script type='text/javascript' src='${project}/dwr/util.js'></script>

<table border="0" width="100%" height="100%" cellpading="0" cellspacing="0">
	## 기능 버튼 영역
	<tr>
		<td height="25" align="right">
			<table width="100%" border="0" cellspacing="0" cellpadding="0" class="pd_top10 pd_bot10">
            	<tr>
                	<td align="right">						
						#button("search")
						#toolbar_nscm($_moon_toolbar "" "" "sc_03050_itemPreference_list_save_comp" "sc_03050_itemPreference_list_del_comp")
					</td>
            	</tr>
        	</table>
		</td>
	</tr>
	## 조회 영역
	<tr>
		<td width="100%" valign="top">
			<table border="0" width="100%" cellpading="0" cellspacing="0">
				<tr height="2"><td colspan="3" style="background-color:#d0d0d0; " onClick="OpenClose(search_menu); $!{resizeFuncCallCode}; "></td></tr>
				<tr>
					<td width="2" style="background-color:#d0d0d0; " onClick="OpenClose(search_menu); $!{resizeFuncCallCode}; "></td>
					<td width="100%">
            			<table border="0" width="100%" cellpading="0" cellspacing="0" style="background-color:#f2f2f2; ">
            				<tr id="search_menu" style="display:block; ">
            					<td width="15%" align="right">공장 :</td> 
            					<td width="25%" align="left"> 
									<select name="selected_plant" style="width:145px; " >   
										<option value="">선택</option>
									#foreach( $condition in $combo_plant_list )  
										<option value="$condition.get(0)" #if($!{selected_plant} == "$condition.get(0)") selected #else #end >$condition.get(1)</option>											
									#end   
   									</select> 
            					</td>	
								<td width="18%" align="right">제품 :</td>
            					<td width="42%">   
            						<input name="item_id" class="normal" style="width:65px; " onChange="getItemName(this); "
										onkeypress="enterCheck('${_moon_service}'); " value="$!{item_id}"> 
									<input name="item_name" class="normal" style="width:150px; " 
										onkeypress="enterCheck('${_moon_service}'); " value="$!{item_name}"><img 
										name="imgItem" src="sinc/template/basic/skin/nongshim/images/common/icon_search.gif"  
										align="absmiddle" border="0" style="cursor:pointer;" value="$!{item_name}"
										onClick="openItemSearchPop('item_id', '450', '300'); ">        
                				</td>
            				</tr> 
            			</table>
					</td>
					<td width="2" style="background-color:#d0d0d0; " onClick="OpenClose(search_menu); $!{resizeFuncCallCode}; "></td>
				</tr>
				<tr height="2"><td colspan="3" style="background-color:#d0d0d0; " onClick="OpenClose(search_menu); $!{resizeFuncCallCode}; "></td></tr>
			</table>
		</td>
	</tr>
	<input name="search_h" type="hidden" value="23"> ## search 조건 부분 높이   
	<tr><td height="5"></td></tr>
	## TAB 영역
	<tr>
		<td valign="top">
			<div class="tab-pane" id="tabPane1">
				## tab 좌측 여백
				#tabLeft()
				
				<div class="tab-page" id="tabPage1" style="overflow:hidden; ">
					<h2 class="tab">${_moon_title}</h2>
					<table width="100%" border="0" cellpading="0" cellspacing="0" class="normal-table">
						<tr>
							##<td>#page_info2()</td>
							<td>#page_info()</td>
                            <td align="right">#table_display()</td>
						</tr>
					</table>
					
					<table id="gridArea" width="100%" border="0" cellpadding="0" cellspacing="0"><tr><td>
								
					<table id="tbMain" border="0" width="715" cellpadding="0" cellspacing="0" >
						<tr>							
							<td> 
								<div id="topLine" style="height:45px; width:626px;overflow:hidden;">
									<table width="100%" class="ns-table" style="table-layout:fixed; border-collapse:collapse; ">
										<thead>	
											<tr height="45px">
												<td width="5%">번호</td>
												<td width="11%">공장</td>
												<td width="9%">제품 코드</td>
												<td width="21%">제품 명</td>
												<td width="9%">규격</td>
												<td width="6%">라인<br>코드</td> 
												<td width="12%">라인 명</td>
												<td width="10%">정책</td>
												<td width="8%">우선순위</td>									  
												<td width="8%" class="right">사용여부</td>
											</tr>
					   					 </thead>
					   				</table>
					   			</div>
							</td>
						</tr>	
						
						<tr>							  
							<td valign="top"> 
								<div id="mainDisplay" class="ns_scroll" style="border:0; width:645px; overflow-y:scroll; ">
									<table width="100%" class="ns-table" style="table-layout:fixed; border-collapse:collapse; ">
										<tbody id="main_tbody">	
										#foreach( $tr in $sc_03050_itemPreference_list )
											<tr id="main_tr" height="32px" onMouseOver="bgOver2(this); " onMouseOut="bgOut2(this); ">
    											## 번호
                								<td width="5%" align="center" style="background-color:${search_bgcolor}; ">
                									<a id="divRowNo">$velocityCount</a>
                								</td>
												## 공장
        										<td width="11%" align="center" >
        											<a id="divPlantName">$tr.get(0)</a><input
        												type="text" name="plant_name" class="normal" value="$tr.get(0)"												
        												style="width:100%; display:none; "> 											
        										</td> 
												## 제품 코드
        										<td width="9%" align="center" >
        											<a id="divItemId">$tr.get(1)</a><input
        												type="text" name="dp_item_id" class="normal" value="$tr.get(1)"				 								
        												style="width:100%; display:none; "> 											
        										</td>
												## 제품 명   
        										<td width="21%" align="left" >
        											<a id="divItemName">&nbsp;$tr.get(2)</a><input
        												type="text" name="dp_item_name" class="normal" value="$tr.get(2)"				 								
        												style="width:100%; display:none; ">										 										
        										</td>
												## 규격 
        										<td width="9%" align="center" >
        											<a id="divItemSpec">$tr.get(3)</a><input
        												type="text" name="item_spec" class="normal" value="$tr.get(3)"				 								
        												style="width:100%; display:none; ">
        										</td>
    											## 라인 코드
        										<td width="6%" align="center" >
        											<a id="divLineId">$tr.get(4)</a><input
        												type="text" name="line_id" class="normal" value="$tr.get(4)"												
        												style="width:100%; display:none; "> 											
        										</td>
    											## 라인 명
        										<td width="12%" align="left" >
        											<a id="divLineName">&nbsp;$tr.get(5)</a><input
        												type="text" name="line_name" class="normal" value="$tr.get(5)"												
        												style="width:100%; display:none; "> 											
        										</td> 
												## 정책
        										<td width="10%" align="center" onClick="setEditMode(this); ">
        											<a id="divPolicy">$tr.get(6)</a><select 
        												name="policy" onFocusOut="setViewMode(this); " onKeyDown="moveNextBox(this);"  onChange="changePolicy(this); "
        												style="width:100%; padding-left:5px; display:none;" tabindex="1">
															<option value="">선택</option>
														#foreach( $condition in $line_priority_list)
    														<option value="$condition.get(0)" #if("$condition.get(0)" == "$tr.get(6)") selected #end>$condition.get(0)</option>
    													#end
													</select>											
        										</td>
    											## 우선순위
        										<td width="8%" align="center" onClick="setEditMode(this); ">
        											<a id="divPriority">$tr.get(7)</a><input 
												type="text" name="priority" class="normal" size="3" value="$tr.get(7)"
												onKeyDown="moveNextBox(this); " onFocusOut="setViewMode(this); " tabindex="2"
												style="width:100%; padding-left:5px; display:none; text-align:center; " onDblClick="this.select(); ">
        										</td>
												## 사용여부
        										<td width="8%" align="center" class="right" onClick="setEditMode(this); ">
        											<a id="divUseFlag">#if($!{tr.get(8)} == "Y") YES #elseif($!{tr.get(8)} == "N") NO #else $!{tr.get(8)} #end</a><select 
        												name="use_flag" onFocusOut="setViewMode(this); " onKeyDown="moveNextBox(this);" onChange="changeUseFlag(this); "
        												style="width:100%; padding-left:5px; display:none;" tabindex="3"> 
														<option value="">선택</option>
														<option value="Y" #if("Y" == "$tr.get(8)") selected #end>YES</option>
														<option value="N" #if("N" == "$tr.get(8)") selected #end>NO</option>														
													</select>											
        										</td>
											</tr>
										#end
										</tbody>
									</table>
								</div>
							</td>
						</tr>
					</table>
					
					</td></tr></table>
					
					## waiting 표시영역
					#waitingArea()	
					
					<table align="center" border="0" cellpading="0" cellspacing="0" class="normal-table"><tr><td>
    					$moon.paging($_moon_service, $_moon_service_count, $_moon_perpage, $_moon_pagenumber, $request.getContextPath())
    					<input type="hidden" name="_moon_service" value="${_moon_service}">
    					<input type="hidden" name="_moon_pagenumber" value="$!{_moon_pagenumber}">
    					##<input type="hidden" name="_moon_perpage" value="$!{_moon_perpage}">
    					## 번호 배경색
    					<input name="searchBgcolor" type="hidden" value="${search_bgcolor}">
					</td></tr></table>				
				</div>
			</div>
		</td>
	</tr>
</table>

<script> 
	
	// 화면 resize
	$!{resizeFuncCallCode};
	function window.onresize() { $!{resizeFuncCallCode}; }
	
	// 도움말 내용 입력
	var helpStr = "◈ 공장을 반드시 선택하고 조회해야 합니다.";
	helpStr += "<br>◈ 각 항목을 선택 후 상단의 조회 버튼을 클릭하여 품목-생산라인 선호도를 조회 합니다.";
	helpStr += "<br>◈ 우선순위 항목과 사용여부 항목을 입력 후 상단의 저장 버튼을 클릭하여 제품별 생산라인 선호도를 저장합니다.";
	helpStr += "<br>◈ 우선순위는 제품에 대해 필수적으로 모두 입력해야 합니다.";
	helpStr += "<br>◈ 상단의 삭제 버튼을 클릭하면 화면에 표시된 항목들의 우선순위가 삭제 됩니다.";
	helpCont.innerHTML = helpStr;
	hDynamicHeight = 0;	
	
	setItemGroupColor();
		
</script>
